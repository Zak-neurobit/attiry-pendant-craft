<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Products</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <h1>Admin Products Test</h1>
    <div id="status">Testing...</div>
    <div id="products"></div>

    <script>
        const supabaseUrl = 'https://jpbfprlpbiojfhshlhcp.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpwYmZwcmxwYmlvamZoc2hsaGNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyOTg0NzEsImV4cCI6MjA2ODg3NDQ3MX0.POTXWKXfs8vMJkI7O7a1sXUbQwmXLm6bGwbrMnQOaDU';
        
        const { createClient } = supabase;
        const supabaseClient = createClient(supabaseUrl, supabaseKey);

        async function testAdminProducts() {
            const statusDiv = document.getElementById('status');
            const productsDiv = document.getElementById('products');
            
            statusDiv.innerHTML = 'Fetching products...';
            
            try {
                const { data, error } = await supabaseClient
                    .from('products')
                    .select('*')
                    .order('created_at', { ascending: false });

                if (error) {
                    statusDiv.innerHTML = `❌ Error: ${error.message}`;
                    console.error('Supabase error:', error);
                    return;
                }

                statusDiv.innerHTML = `✅ Successfully fetched ${data?.length || 0} products`;
                
                if (data && data.length > 0) {
                    productsDiv.innerHTML = '<h2>Products:</h2>' + 
                        data.map(product => `
                            <div style="border: 1px solid #ccc; padding: 10px; margin: 10px;">
                                <h3>${product.title}</h3>
                                <p>Price: $${product.price}</p>
                                <p>Active: ${product.is_active}</p>
                                <p>Featured: ${product.is_featured}</p>
                                <p>Stock: ${product.stock}</p>
                                <p>Images: ${product.image_urls?.length || 0}</p>
                            </div>
                        `).join('');
                } else {
                    productsDiv.innerHTML = '<p>No products found</p>';
                }
                
            } catch (err) {
                statusDiv.innerHTML = `❌ Connection Error: ${err.message}`;
                console.error('Connection error:', err);
            }
        }

        // Run test on load
        testAdminProducts();
    </script>
</body>
</html>